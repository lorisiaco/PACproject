<!DOCTYPE html>
<html lang="it" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spendly - Registrati</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-50 text-gray-900">

    <!-- Navbar -->
    <nav class="bg-gray-900 text-white shadow-md py-4">
        <div class="max-w-7xl mx-auto px-4 flex justify-between items-center">
            <!-- Logo (immagine) -->
            <a th:href="@{/}" class="inline-block">
                <img th:src="@{/images/logo.png}"
                     alt="Spendly Logo"
                     class="h-12 w-auto object-contain"/>
            </a>
            <div class="hidden md:flex space-x-6">
                <a th:href="@{/login}" class="hover:text-blue-300">Accedi</a>
                <a th:href="@{/register}" class="hover:text-blue-300">Registrati</a>
                <a th:href="@{/contact}" class="hover:text-blue-300">Contatti</a>
            </div>
        </div>
    </nav>

    <!-- Contenuto principale: Form di Registrazione -->
    <main class="max-w-3xl mx-auto mt-10 mb-16 px-4">

        <h2 class="text-2xl font-semibold text-center mb-6">Register</h2>
        <hr class="mb-6"/>

        <!-- Messaggio di successo -->
        <div th:if="${success}"
             class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded relative mb-6"
             role="alert">
            <strong class="font-bold">Account Created Successfully!</strong>
            <span class="block sm:inline"> 
                <a href="/login" class="ml-2 text-blue-700 hover:underline font-medium">Login</a>
            </span>
            <button type="button" class="absolute top-0 bottom-0 right-0 px-4 py-3" 
                    data-dismiss="alert" aria-label="Close"
                    onclick="this.parentElement.style.display='none'">
                <svg class="fill-current h-6 w-6 text-green-700" role="button" viewBox="0 0 20 20">
                    <title>Close</title>
                    <path d="M14.348 5.652a.5.5 0 0 1 .7.7L10.707 10l4.341 4.348a.5.5 0 1 1-.7.7L10 10.707l-4.348 4.341a.5.5 0 1 1-.7-.7L9.293 10 4.952 5.652a.5.5 0 0 1 .7-.7L10 9.293l4.348-4.341z"/>
                </svg>
            </button>
        </div>

        <!-- Form -->
        <!-- ATTENZIONE QUI: serve multipart/form-data per poter inviare file -->
        <form method="post" th:object="${registerDto}" enctype="multipart/form-data" class="bg-white p-6 rounded-md shadow-md">
            <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>

            <!-- First Name -->
            <div class="mb-4">
                <label class="block text-gray-700 font-semibold mb-2">First Name*</label>
                <input class="border border-gray-300 rounded w-full py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-400"
                       th:field="*{firstName}"/>
                <p th:if="${#fields.hasErrors('firstName')}"
                   th:errors="*{firstName}"
                   class="text-red-500 text-sm mt-1">
                </p>
            </div>

            <!-- Last Name -->
            <div class="mb-4">
                <label class="block text-gray-700 font-semibold mb-2">Last Name*</label>
                <input class="border border-gray-300 rounded w-full py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-400"
                       th:field="*{lastName}"/>
                <p th:if="${#fields.hasErrors('lastName')}"
                   th:errors="*{lastName}"
                   class="text-red-500 text-sm mt-1">
                </p>
            </div>

            <!-- Email -->
            <div class="mb-4">
                <label class="block text-gray-700 font-semibold mb-2">Email*</label>
                <input class="border border-gray-300 rounded w-full py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-400"
                       th:field="*{email}"/>
                <p th:if="${#fields.hasErrors('email')}"
                   th:errors="*{email}"
                   class="text-red-500 text-sm mt-1">
                </p>
            </div>

            <!-- Phone -->
            <div class="mb-4">
                <label class="block text-gray-700 font-semibold mb-2">Phone</label>
                <input class="border border-gray-300 rounded w-full py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-400"
                       th:field="*{phone}"/>
                <p th:if="${#fields.hasErrors('phone')}"
                   th:errors="*{phone}"
                   class="text-red-500 text-sm mt-1">
                </p>
            </div>

            <!-- Address -->
            <div class="mb-4">
                <label class="block text-gray-700 font-semibold mb-2">Address</label>
                <input class="border border-gray-300 rounded w-full py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-400"
                       th:field="*{address}"/>
                <p th:if="${#fields.hasErrors('address')}"
                   th:errors="*{address}"
                   class="text-red-500 text-sm mt-1">
                </p>
            </div>

            <!-- Password -->
            <div class="mb-4">
                <label class="block text-gray-700 font-semibold mb-2">Password*</label>
                <input type="password"
                       class="border border-gray-300 rounded w-full py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-400"
                       th:field="*{password}"/>
                <p th:if="${#fields.hasErrors('password')}"
                   th:errors="*{password}"
                   class="text-red-500 text-sm mt-1">
                </p>
            </div>

            <!-- Confirm Password -->
            <div class="mb-4">
                <label class="block text-gray-700 font-semibold mb-2">Confirm Password*</label>
                <input type="password"
                       class="border border-gray-300 rounded w-full py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-400"
                       th:field="*{confirmPassword}"/>
                <p th:if="${#fields.hasErrors('confirmPassword')}"
                   th:errors="*{confirmPassword}"
                   class="text-red-500 text-sm mt-1">
                </p>
            </div>

            <!-- Profile Image (NUOVO) -->
            <div class="mb-4">
                <label class="block text-gray-700 font-semibold mb-2">Profile Image</label>
                <input type="file"
                       class="border border-gray-300 rounded w-full py-2 px-3 focus:outline-none focus:ring-2 focus:ring-blue-400"
                       th:field="*{profileImage}"/>
                <!-- Nessun vincolo di validazione rigido, opzionale -->
            </div>

            <!-- Bottoni -->
            <div class="flex flex-col sm:flex-row justify-between sm:items-center mt-6">
                <button type="submit"
                        class="bg-blue-600 text-white font-semibold py-2 px-4 rounded hover:bg-blue-700 mb-3 sm:mb-0">
                    Submit
                </button>
                <a th:href="@{/}"
                   class="text-blue-700 hover:underline font-semibold text-center">
                    Cancel
                </a>
            </div>
        </form>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white text-center py-6">
        <p>&copy; 2025 Spendly. Tutti i diritti riservati.</p>
        <p>
            <a th:href="@{/contact}" class="text-blue-400 hover:underline">
                Contattaci
            </a>
        </p>
    </footer>

</body>
</html>
















